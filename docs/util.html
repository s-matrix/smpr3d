---

title: Util Main


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "nbs/01_util.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_util.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fftshift_checkerboard" class="doc_header"><code>fftshift_checkerboard</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L26" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fftshift_checkerboard</code>(<strong><code>w</code></strong>, <strong><code>h</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="cartesian_aberrations" class="doc_header"><code>cartesian_aberrations</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L1882" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>cartesian_aberrations</code>(<strong><code>qx</code></strong>, <strong><code>qy</code></strong>, <strong><code>lam</code></strong>, <strong><code>C</code></strong>)</p>
</blockquote>
<p>Zernike polynomials in the cartesian coordinate system
:param qx:
:param qy:
:param lam: wavelength in Angstrom
:param C:   12 x D
:return:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="memory_mb" class="doc_header"><code>memory_mb</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L102" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>memory_mb</code>(<strong><code>x</code></strong>, <strong><code>dtype</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="memory_gb" class="doc_header"><code>memory_gb</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L112" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>memory_gb</code>(<strong><code>x</code></strong>, <strong><code>dtype</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fourier_coordinates_2D" class="doc_header"><code>fourier_coordinates_2D</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L122" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fourier_coordinates_2D</code>(<strong><code>N</code></strong>, <strong><code>dx</code></strong>=<em><code>[1.0, 1.0]</code></em>, <strong><code>centered</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="array_split_divpoints" class="doc_header"><code>array_split_divpoints</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L133" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>array_split_divpoints</code>(<strong><code>ary</code></strong>, <strong><code>indices_or_sections</code></strong>, <strong><code>axis</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>Split an array into multiple sub-arrays.
Please refer to the <code>split</code> documentation.  The only difference
between these functions is that <code>array_split</code> allows
<code>indices_or_sections</code> to be an integer that does <em>not</em> equally
divide the axis. For an array of length l that should be split
into n sections, it returns l % n sub-arrays of size l//n + 1
and the rest of size l//n.</p>
<h2 id="See-Also">See Also<a class="anchor-link" href="#See-Also"> </a></h2><p>split : Split array into multiple sub-arrays of equal size.</p>
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2><blockquote><blockquote><blockquote><p>x = np.arange(8.0)
np.array_split(x, 3)
    [array([0.,  1.,  2.]), array([3.,  4.,  5.]), array([6.,  7.])]
x = np.arange(7.0)
np.array_split(x, 3)
    [array([0.,  1.,  2.]), array([3.,  4.]), array([5.,  6.])]</p>
</blockquote>
</blockquote>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="R_factor" class="doc_header"><code>R_factor</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L176" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>R_factor</code>(<strong><code>z</code></strong>, <strong><code>a</code></strong>, <strong><code>world_size</code></strong>=<em><code>1</code></em>)</p>
</blockquote>
<p>Calculate R error metric = sum(|z-a|)/sum(|a|).</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="distance" class="doc_header"><code>distance</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L186" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>distance</code>(<strong><code>z</code></strong>, <strong><code>x</code></strong>)</p>
</blockquote>
<p>Distance of two complex vectors
:param z: tensor
:param x: tensor
:return:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="rel_dist" class="doc_header"><code>rel_dist</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L202" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>rel_dist</code>(<strong><code>z</code></strong>, <strong><code>x</code></strong>)</p>
</blockquote>
<p>Distance of two complex vectors
:param z: tensor
:param x: tensor
:return:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Param" class="doc_header"><code>class</code> <code>Param</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L215" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Param</code>(<strong><code>__d__</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>) :: <code>dict</code></p>
</blockquote>
<p>Convenience class: a dictionary that gives access to its keys
through attributes.</p>
<p>Note: dictionaries stored in this class are also automatically converted
to Param objects:</p>
<blockquote><blockquote><blockquote><p>p = Param()
p.x = {}
p
Param({})</p>
</blockquote>
</blockquote>
</blockquote>
<p>While dict(p) returns a dictionary, it is not recursive, so it is better in this case
to use p.todict(). However, p.todict does not check for infinite recursion. So please
don't store a dictionary (or a Param) inside itself.</p>
<p>BE: Please note also that the recursive behavior of the update function will create
new references. This will lead inconsistency if other objects refer to dicts or Params
in the updated Param instance.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="validate_standard_param" class="doc_header"><code>validate_standard_param</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L392" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>validate_standard_param</code>(<strong><code>sp</code></strong>, <strong><code>p</code></strong>=<em><code>None</code></em>, <strong><code>prefix</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>validate_standard_param(sp) checks if sp follows the standard parameter convention.
validate_standard_param(sp, p) attemps to check if p is a valid implementation of sp.</p>
<p>NOT VERY SOPHISTICATED FOR NOW!</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="format_standard_param" class="doc_header"><code>format_standard_param</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L426" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>format_standard_param</code>(<strong><code>p</code></strong>)</p>
</blockquote>
<p>Pretty-print a Standard Param class.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="asParam" class="doc_header"><code>asParam</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L443" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>asParam</code>(<strong><code>obj</code></strong>)</p>
</blockquote>
<p>Convert the input to a Param.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>a : dict_like
    Input structure, in any format that can be converted to a Param.</p>
<p>Returns:
out : Param
    The Param structure built from a. No copy is done if the input
    is already a Param.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_default" class="doc_header"><code>make_default</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L460" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_default</code>(<strong><code>default_dict_or_file</code></strong>)</p>
</blockquote>
<p>convert description dict to a module dict using a possibly verbose Q &amp; A game</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="single_sideband_reconstruction" class="doc_header"><code>single_sideband_reconstruction</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L470" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>single_sideband_reconstruction</code>(<strong><code>G</code></strong>, <strong><code>Qx_all</code></strong>, <strong><code>Qy_all</code></strong>, <strong><code>Kx_all</code></strong>, <strong><code>Ky_all</code></strong>, <strong><code>aberrations</code></strong>, <strong><code>theta_rot</code></strong>, <strong><code>alpha_rad</code></strong>, <strong><code>Ψ_Qp</code></strong>, <strong><code>Ψ_Qp_left_sb</code></strong>, <strong><code>Ψ_Qp_right_sb</code></strong>, <strong><code>eps</code></strong>, <strong><code>lam</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="AutoJitCUDAKernel object at 0x7fa036102ac0>" class="doc_header"><code>AutoJitCUDAKernel object at 0x7fa036102ac0></code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>AutoJitCUDAKernel object at 0x7fa036102ac0></code>(<strong>*<code>args</code></strong>)</p>
</blockquote>
<p>CUDA Kernel object. When called, the kernel object will specialize itself
for the given arguments (if no suitable specialized version already exists)
&amp; compute capability, and launch on the device associated with the current
context.</p>
<p>Kernel objects are not to be constructed by the user, but instead are
created using the :func:<code>numba.cuda.jit</code> decorator.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="sector_mask" class="doc_header"><code>sector_mask</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L627" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>sector_mask</code>(<strong><code>shape</code></strong>, <strong><code>centre</code></strong>, <strong><code>radius</code></strong>, <strong><code>angle_range</code></strong>=<em><code>(0, 360)</code></em>)</p>
</blockquote>
<p>Return a boolean mask for a circular sector. The start/stop angles in
<code>angle_range</code> should be given in clockwise order.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="wavelength" class="doc_header"><code>wavelength</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L658" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>wavelength</code>(<strong><code>E_eV</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="DOF" class="doc_header"><code>DOF</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L665" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>DOF</code>(<strong><code>alpha</code></strong>, <strong><code>E_eV</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="AutoJitCUDAKernel object at 0x7fa03411ffa0>" class="doc_header"><code>AutoJitCUDAKernel object at 0x7fa03411ffa0></code><a href="" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>AutoJitCUDAKernel object at 0x7fa03411ffa0></code>(<strong>*<code>args</code></strong>)</p>
</blockquote>
<p>CUDA Kernel object. When called, the kernel object will specialize itself
for the given arguments (if no suitable specialized version already exists)
&amp; compute capability, and launch on the device associated with the current
context.</p>
<p>Kernel objects are not to be constructed by the user, but instead are
created using the :func:<code>numba.cuda.jit</code> decorator.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="advanced_raster_scan" class="doc_header"><code>advanced_raster_scan</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L743" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>advanced_raster_scan</code>(<strong><code>ny</code></strong>=<em><code>10</code></em>, <strong><code>nx</code></strong>=<em><code>10</code></em>, <strong><code>fast_axis</code></strong>=<em><code>1</code></em>, <strong><code>mirror</code></strong>=<em><code>[1, 1]</code></em>, <strong><code>theta</code></strong>=<em><code>0</code></em>, <strong><code>dy</code></strong>=<em><code>1</code></em>, <strong><code>dx</code></strong>=<em><code>1</code></em>)</p>
</blockquote>
<p>Generates as raster scan.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ny, nx : int
    Number of steps in <em>y</em> (vertical) and <em>x</em> (horizontal) direction
    <em>x</em> is the fast axis</p>
<p>dy, dx : float
    Step size (grid spacinf) in <em>y</em> and <em>x</em></p>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2><p>pos : ndarray
    A (N,2)-array of positions.</p>
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="advanced_raster_scan" class="doc_header"><code>advanced_raster_scan</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L743" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>advanced_raster_scan</code>(<strong><code>ny</code></strong>=<em><code>10</code></em>, <strong><code>nx</code></strong>=<em><code>10</code></em>, <strong><code>fast_axis</code></strong>=<em><code>1</code></em>, <strong><code>mirror</code></strong>=<em><code>[1, 1]</code></em>, <strong><code>theta</code></strong>=<em><code>0</code></em>, <strong><code>dy</code></strong>=<em><code>1</code></em>, <strong><code>dx</code></strong>=<em><code>1</code></em>)</p>
</blockquote>
<p>Generates as raster scan.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>ny, nx : int
    Number of steps in <em>y</em> (vertical) and <em>x</em> (horizontal) direction
    <em>x</em> is the fast axis</p>
<p>dy, dx : float
    Step size (grid spacinf) in <em>y</em> and <em>x</em></p>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2><p>pos : ndarray
    A (N,2)-array of positions.</p>
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_qx_qy_1D" class="doc_header"><code>get_qx_qy_1D</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L793" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_qx_qy_1D</code>(<strong><code>M</code></strong>, <strong><code>dx</code></strong>, <strong><code>dtype</code></strong>, <strong><code>fft_shifted</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_qx_qy_2D" class="doc_header"><code>get_qx_qy_2D</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L802" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_qx_qy_2D</code>(<strong><code>M</code></strong>, <strong><code>dx</code></strong>, <strong><code>dtype</code></strong>, <strong><code>fft_shifted</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="scatter_add_patches" class="doc_header"><code>scatter_add_patches</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L816" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>scatter_add_patches</code>(<strong><code>input</code></strong>:<code>Tensor</code>, <strong><code>out</code></strong>:<code>Tensor</code>, <strong><code>axes</code></strong>, <strong><code>positions</code></strong>, <strong><code>patch_size</code></strong>, <strong><code>reduce_dim</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Scatter_adds K patches of size :patch_size: at axes [ax1, ax2] into the output tensor. The patches are added at
positions :positions:. Additionally, several dimensions of the input tensor can be summed, specified by reduce_dims.</p>
<p>:param input:   K x M1 x M2 at least 3-dimensional tensor of patches,
:param out: at least two-dimensional tensor that is the scatter_add target
:param axes: (2,) axes at which to scatter the input
:param positions: K x 2 LongTensor
:param patch_size: (2,) LongTensor
:param reduce_dims: (N,) LongTensor
:return: out, the target of scatter<em>add</em></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="gather_patches" class="doc_header"><code>gather_patches</code><a href="https://github.com/s-matrix/smpr3d/tree/master/smpr3d/util.py#L878" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>gather_patches</code>(<strong><code>input</code></strong>, <strong><code>axes</code></strong>, <strong><code>positions</code></strong>, <strong><code>patch_size</code></strong>, <strong><code>out</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Gathers K patches of size :patch_size: at axes [ax1, ax2] of the input tensor. The patches are collected started at
K positions pos.</p>
<p>if :input: is an n-dimensional tensor with size (x_0, x_1, x_2, ..., x_a, x_ax1, x_ax2, x<em>b, ..., x</em>{n-1})
then :out: is an n-dimensional tensor with size  (K, x_0, x_1, x_2, ..., x_a, patch_size[0], patch_size[1], x<em>3, ..., x</em>{n-1})</p>
<p>:param input: at least two-dimensional tensor
:param axes: axes at which to gather the patches
:param positions: K x 2 LongTensor
:param patch_size: (2,) LongTensor
:param out: n-dimensional tensor with size  (K, x_0, x_1, x_2, ..., x_a, patch_size[0], patch_size[1], x<em>3, ..., x</em>{n-1})
:return:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

